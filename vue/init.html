<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue 的初始化 new Vue(options) 都做了什么</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/knowledge/assets/css/0.styles.3f78ab37.css" as="style"><link rel="preload" href="/knowledge/assets/js/app.c65263c0.js" as="script"><link rel="preload" href="/knowledge/assets/js/2.d9a222ff.js" as="script"><link rel="preload" href="/knowledge/assets/js/7.a68456d8.js" as="script"><link rel="prefetch" href="/knowledge/assets/js/10.624ab7ba.js"><link rel="prefetch" href="/knowledge/assets/js/11.fed9ed54.js"><link rel="prefetch" href="/knowledge/assets/js/12.882ceff6.js"><link rel="prefetch" href="/knowledge/assets/js/13.84d5b8a7.js"><link rel="prefetch" href="/knowledge/assets/js/14.2143a965.js"><link rel="prefetch" href="/knowledge/assets/js/15.52a45d35.js"><link rel="prefetch" href="/knowledge/assets/js/16.31c6b9ed.js"><link rel="prefetch" href="/knowledge/assets/js/17.ac2e3aed.js"><link rel="prefetch" href="/knowledge/assets/js/18.c0334b19.js"><link rel="prefetch" href="/knowledge/assets/js/19.fdac3631.js"><link rel="prefetch" href="/knowledge/assets/js/20.512d8632.js"><link rel="prefetch" href="/knowledge/assets/js/21.0f68a002.js"><link rel="prefetch" href="/knowledge/assets/js/3.dfb039e4.js"><link rel="prefetch" href="/knowledge/assets/js/4.d6f55be9.js"><link rel="prefetch" href="/knowledge/assets/js/5.0ccb2373.js"><link rel="prefetch" href="/knowledge/assets/js/6.ee8dc5d9.js"><link rel="prefetch" href="/knowledge/assets/js/8.256bb93e.js"><link rel="prefetch" href="/knowledge/assets/js/9.3972e0c1.js">
    <link rel="stylesheet" href="/knowledge/assets/css/0.styles.3f78ab37.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/knowledge/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><a href="/knowledge/" aria-current="page" class="sidebar-link">Hello World Good !</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>NodeJS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Vue</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/knowledge/vue/init.html" aria-current="page" class="active sidebar-link">初始化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knowledge/vue/init.html#vue-的初始化-new-vue-options-都做了什么" class="sidebar-link">Vue 的初始化 new Vue(options) 都做了什么</a></li></ul></li><li><a href="/knowledge/vue/reactive.html" class="sidebar-link">响应式原理</a></li><li><a href="/knowledge/vue/asyncUpdate.html" class="sidebar-link">异步更新</a></li><li><a href="/knowledge/vue/global-api.html" class="sidebar-link">全局API</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="vue-的初始化-new-vue-options-都做了什么"><a href="#vue-的初始化-new-vue-options-都做了什么" class="header-anchor">#</a> Vue 的初始化 new Vue(options) 都做了什么</h2> <ul><li><p>准备工作</p> <p>下载<a href="https://github.com/vuejs/vue.git" target="_blank" rel="noopener noreferrer">vue 源码<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>到本地，在script的dev中，添加<code>--sourcemap</code>，然后运行<code>npm run dev</code></p> <p><img src="data:image/png;base64,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" alt=""></p> <p>在 example 目录下新建一个 html 文件，作为入口文件用来调试。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Vue test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{msg}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../dist/vue.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
      <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        el<span class="token operator">:</span> <span class="token string">&quot;#app&quot;</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span>
          msg<span class="token operator">:</span> <span class="token string">&quot;hello vue&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>在浏览器中打开这个html，打个断点就可以开始调试了</p> <p><img src="/knowledge/assets/img/2.232e6af7.png" alt=""></p></li></ul> <blockquote><h3 id="vue"><a href="#vue" class="header-anchor">#</a> Vue</h3> <p>/src/core/instance/index.js</p></blockquote> <p>由 vue 的使用方式 new Vue 可知，Vue是一个构造函数。构造函数定义在<code>/src/core/instance/index.js</code>中。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Vue</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>省略部分代码
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_init</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">initMixin</span><span class="token punctuation">(</span>Vue<span class="token punctuation">)</span>
</code></pre></div><blockquote><h3 id="init"><a href="#init" class="header-anchor">#</a> _init</h3> <p>/src/core/instance/init.js</p></blockquote> <p>Vue构造函数中调动了_init方法，这个方法定义是挂载在原型链上的函数。定义在 <code>init.js</code>中的<code>initMixin</code>里</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">initMixin</span><span class="token punctuation">(</span><span class="token parameter">Vue<span class="token operator">:</span> Class<span class="token operator">&lt;</span>Component<span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_init</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options<span class="token operator">?</span><span class="token operator">:</span> Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//赋值，所以后续的 vm 就等价于 this</span>
    <span class="token keyword">const</span> vm<span class="token operator">:</span> Component <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token comment">// a uid </span>
    vm<span class="token punctuation">.</span>_uid <span class="token operator">=</span> uid<span class="token operator">++</span><span class="token punctuation">;</span>

    <span class="token comment">// a flag to avoid this being observed</span>
    vm<span class="token punctuation">.</span>_isVue <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token comment">// merge options</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>options <span class="token operator">&amp;&amp;</span> options<span class="token punctuation">.</span>_isComponent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// optimize internal component instantiation</span>
      <span class="token comment">// since dynamic options merging is pretty slow, and none of the</span>
      <span class="token comment">// internal component options needs special treatment.</span>
      <span class="token function">initInternalComponent</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 初始化根组件时走到这里</span>
      vm<span class="token punctuation">.</span>$options <span class="token operator">=</span> <span class="token function">mergeOptions</span><span class="token punctuation">(</span>
        <span class="token function">resolveConstructorOptions</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">,</span>
        options <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
        vm
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/* istanbul ignore else */</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">&quot;production&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">initProxy</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      vm<span class="token punctuation">.</span>_renderProxy <span class="token operator">=</span> vm<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// expose real self</span>
    vm<span class="token punctuation">.</span>_self <span class="token operator">=</span> vm<span class="token punctuation">;</span>
    <span class="token function">initLifecycle</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">initEvents</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">initRender</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">callHook</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">&quot;beforeCreate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">initInjections</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// resolve injections before data/props</span>
    <span class="token function">initState</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">initProvide</span><span class="token punctuation">(</span>vm<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// resolve provide after data/props</span>
    <span class="token function">callHook</span><span class="token punctuation">(</span>vm<span class="token punctuation">,</span> <span class="token string">&quot;created&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>el<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      vm<span class="token punctuation">.</span><span class="token function">$mount</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$options<span class="token punctuation">.</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><h3 id="resolveconstructoroptions"><a href="#resolveconstructoroptions" class="header-anchor">#</a> resolveConstructorOptions</h3> <p>/src/core/instance/init.js</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
* 入参是 vm.constructor，也就是 function Vue 这个构造函数
*/</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">resolveConstructorOptions</span><span class="token punctuation">(</span><span class="token parameter">Ctor<span class="token operator">:</span> Class<span class="token operator">&lt;</span>Component<span class="token operator">&gt;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> options <span class="token operator">=</span> Ctor<span class="token punctuation">.</span>options<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>Ctor<span class="token punctuation">.</span>super<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> superOptions <span class="token operator">=</span> <span class="token function">resolveConstructorOptions</span><span class="token punctuation">(</span>Ctor<span class="token punctuation">.</span>super<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> cachedSuperOptions <span class="token operator">=</span> Ctor<span class="token punctuation">.</span>superOptions<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>superOptions <span class="token operator">!==</span> cachedSuperOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// super option changed,</span>
      <span class="token comment">// need to resolve new options.</span>
      Ctor<span class="token punctuation">.</span>superOptions <span class="token operator">=</span> superOptions<span class="token punctuation">;</span>
      <span class="token comment">// check if there are any late-modified/attached options (#4976)</span>
      <span class="token keyword">const</span> modifiedOptions <span class="token operator">=</span> <span class="token function">resolveModifiedOptions</span><span class="token punctuation">(</span>Ctor<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// update base extend options</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>modifiedOptions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">extend</span><span class="token punctuation">(</span>Ctor<span class="token punctuation">.</span>extendOptions<span class="token punctuation">,</span> modifiedOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      options <span class="token operator">=</span> Ctor<span class="token punctuation">.</span>options <span class="token operator">=</span> <span class="token function">mergeOptions</span><span class="token punctuation">(</span>superOptions<span class="token punctuation">,</span> Ctor<span class="token punctuation">.</span>extendOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        options<span class="token punctuation">.</span>components<span class="token punctuation">[</span>options<span class="token punctuation">.</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> Ctor<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> options<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><h3 id="mergeoptions"><a href="#mergeoptions" class="header-anchor">#</a> mergeOptions</h3> <p>/src/core/util/options.js</p></blockquote> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">/**
 * 合并两个 options 对象
 */</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">mergeOptions</span> <span class="token punctuation">(</span>
  <span class="token parameter">parent<span class="token operator">:</span> Object<span class="token punctuation">,</span>
  child<span class="token operator">:</span> Object<span class="token punctuation">,</span>
  vm<span class="token operator">?</span><span class="token operator">:</span> Component</span>
<span class="token punctuation">)</span><span class="token operator">:</span> Object <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果child 的 options 里有 components的话，</span>
    <span class="token comment">// 验证 components 的名字是否合法</span>
    <span class="token function">checkComponents</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> child <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    child <span class="token operator">=</span> child<span class="token punctuation">.</span>options
  <span class="token punctuation">}</span>
  <span class="token comment">// 对 props 格式规范化，例如 'a-b:String' 会变成 'aB:{type: String}'</span>
  <span class="token comment">// 所以 props 书写的时候‘-’或驼峰都行，用的时候只能驼峰</span>
  <span class="token function">normalizeProps</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> vm<span class="token punctuation">)</span>
  <span class="token function">normalizeInject</span><span class="token punctuation">(</span>child<span class="token punctuation">,</span> vm<span class="token punctuation">)</span>
  <span class="token function">normalizeDirectives</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span>

  <span class="token comment">// Apply extends and mixins on the child options,</span>
  <span class="token comment">// but only if it is a raw options object that isn't</span>
  <span class="token comment">// the result of another mergeOptions call.</span>
  <span class="token comment">// Only merged options has the _base property.</span>
   
  <span class="token comment">// 合并过的options，会有_base属性，就不再进行合并</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>child<span class="token punctuation">.</span>_base<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>child<span class="token punctuation">.</span>extends<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      parent <span class="token operator">=</span> <span class="token function">mergeOptions</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> child<span class="token punctuation">.</span>extends<span class="token punctuation">,</span> vm<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>child<span class="token punctuation">.</span>mixins<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> l <span class="token operator">=</span> child<span class="token punctuation">.</span>mixins<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        parent <span class="token operator">=</span> <span class="token function">mergeOptions</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> child<span class="token punctuation">.</span>mixins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> vm<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">let</span> key
  <span class="token comment">// 下面两个for是为了合并 parent 和 child</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>key <span class="token keyword">in</span> parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">mergeField</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>key <span class="token keyword">in</span> child<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// child 中和 parent 重名的key选项，已经在上一个parent循环中合并过了，</span>
    <span class="token comment">// 所以再这里跳过</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">hasOwn</span><span class="token punctuation">(</span>parent<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">mergeField</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// 合并 parent[key] 和 child[key], child[key]优先级高</span>
  <span class="token keyword">function</span> <span class="token function">mergeField</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> strat <span class="token operator">=</span> strats<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">||</span> defaultStrat
    options<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">strat</span><span class="token punctuation">(</span>parent<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> child<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> vm<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> options
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/knowledge/webpack/plugin.html" class="prev">
        webpack的plugin
      </a></span> <span class="next"><a href="/knowledge/vue/reactive.html">
        响应式原理
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/knowledge/assets/js/app.c65263c0.js" defer></script><script src="/knowledge/assets/js/2.d9a222ff.js" defer></script><script src="/knowledge/assets/js/7.a68456d8.js" defer></script>
  </body>
</html>
